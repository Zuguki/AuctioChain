import{r as u,j as s,b as j,P as l,B as d,o as N,C as b,f,u as P,N as v,H as B,g as A}from"./index-de2d1123.js";import{L as g}from"./LogicDownload-41104aa4.js";import{B as C}from"./BaseListAuctions-61adb0ee.js";import{P as m,u as q}from"./useGetUserName-386ae884.js";import{u as x}from"./Pagination-da7ae05b.js";import{B as T}from"./BaseListLot-14f2c1cf.js";import{u as k}from"./useGetAPI-8a4b8c88.js";import{T as S}from"./timeZone-da1aee6f.js";import"./AuctionLogic-f40de452.js";import"./useQuery-baed50f9.js";import"./utils-73056672.js";const I="_position_1db4q_1",Z="_positionTitle_1db4q_5",w="_positionBlock_1db4q_9",E="_title_1db4q_13",F="_userName_1db4q_17",G="_balance_1db4q_22",H="_countCards_1db4q_30",U="_logout_1db4q_39",W="_informationLots_1db4q_44",y="_timeZone_1db4q_52",n={position:I,positionTitle:Z,positionBlock:w,title:E,userName:F,balance:G,countCards:H,logout:U,informationLots:W,timeZone:y},D=({id:e,isUser:t})=>{const[a,i]=u.useState(1),{data:{auctions:o},isLoading:c,pagination:r}=x(()=>m.getProfileAuctions(e,a),["auctionsProfile",e,a],{auctions:[]});return s.jsxs("div",{className:n.positionBlock,children:[s.jsx("h2",{className:n.positionTitle,children:t?"Мои аукционы":"Аукционы"}),s.jsx(g,{isLoading:c,children:s.jsxs(s.Fragment,{children:[!!o.length&&s.jsxs("p",{className:n.countCards,children:["Количество аукционов: ",r==null?void 0:r.TotalCount]}),t&&s.jsx(j,{to:l.createAuction,className:n.position,children:s.jsx(d,{children:"Создать аукцион"})}),s.jsx(C,{auctions:o,pagination:r,setCurrentPage:i})]})})]})},h=({lots:e,title:t,loading:a,pagination:i,setCurrentPage:o})=>s.jsxs("div",{className:n.positionBlock,children:[s.jsx("h2",{className:n.position,children:t}),s.jsx(g,{isLoading:a,children:s.jsxs(s.Fragment,{children:[!!e.length&&s.jsxs("p",{className:n.informationLots,children:["Количество лотов: ",i==null?void 0:i.TotalCount]}),s.jsx(T,{lots:e,pagination:i,setCurrentPage:o})]})})]}),M=({id:e})=>{const[t,a]=u.useState(1),{data:{winLots:i},isLoading:o,pagination:c}=x(()=>m.getWinLot(e,t),["winLots",t],{winLots:[]});return s.jsx(h,{title:"Выигранные лоты",lots:i,loading:o,pagination:c,setCurrentPage:a})},O=({id:e})=>{const[t,a]=u.useState(1),{data:{activeLots:i},isLoading:o,pagination:c}=x(()=>m.getActiveLots(e,t),["activeLots",e,t],{activeLots:[]});return s.jsx(h,{title:"Активные лоты",lots:i,loading:o,pagination:c,setCurrentPage:a})},os=N(()=>{const{userStore:e}=u.useContext(b),{id:t}=f(),a=P();if(t==null)return alert("Ошибка загрузки страницы!"),s.jsx(v,{to:l.main});const i=e.user.userId,o=t===i,{username:c,isLoading:r}=q(t),{data:{balance:L},isLoading:_}=k(()=>A.getBalanceUser(),["balance"]),p=()=>{e.logout(),a(l.auctions)};return s.jsxs("div",{children:[s.jsxs("div",{className:n.position,children:[s.jsx("h1",{className:n.title,children:"Аккаунт"}),s.jsxs("p",{className:n.timeZone,children:["Часовая зона: ",S]}),!r&&s.jsxs("h3",{className:n.userName,children:["@",c]}),o&&!_&&s.jsxs(s.Fragment,{children:[s.jsxs("h4",{className:n.balance,children:[L," Ac"]}),s.jsx(j,{to:l.bill,children:s.jsx(d,{children:"Пополнить счёт"})})]}),s.jsx(B,{})]}),s.jsx(D,{id:t,isUser:o}),s.jsx(O,{id:t,isUser:o}),s.jsx(M,{id:t,isUser:o}),o&&s.jsx("div",{className:n.logout,children:s.jsx(d,{red:!0,onClick:p,children:"Выйти из аккаунта"})})]})});export{os as default};
