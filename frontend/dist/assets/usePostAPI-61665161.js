var j=(r,t,s)=>{if(!t.has(r))throw TypeError("Cannot "+s)};var i=(r,t,s)=>(j(r,t,"read from private field"),s?s.call(r):t.get(r)),p=(r,t,s)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,s)},f=(r,t,s,e)=>(j(r,t,"write to private field"),e?e.call(r,s):t.set(r,s),s);var y=(r,t,s)=>(j(r,t,"access private method"),s);import{J as A,K as L,M as K,O as P,Q as w,U as q,r as v,j as m,S as F}from"./index-de2d1123.js";import{s as N}from"./utils-73056672.js";var l,d,n,h,g,E,x,M,R,U=(R=class extends A{constructor(t,s){super();p(this,g);p(this,x);p(this,l,void 0);p(this,d,void 0);p(this,n,void 0);p(this,h,void 0);f(this,l,t),this.setOptions(s),this.bindMethods(),y(this,g,E).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=i(this,l).defaultMutationOptions(t),L(this.options,s)||i(this,l).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,n),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&K(s.mutationKey)!==K(this.options.mutationKey)?this.reset():(e=i(this,n))==null||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,n))==null||t.removeObserver(this)}onMutationUpdate(t){y(this,g,E).call(this),y(this,x,M).call(this,t)}getCurrentResult(){return i(this,d)}reset(){var t;(t=i(this,n))==null||t.removeObserver(this),f(this,n,void 0),y(this,g,E).call(this),y(this,x,M).call(this)}mutate(t,s){var e;return f(this,h,s),(e=i(this,n))==null||e.removeObserver(this),f(this,n,i(this,l).getMutationCache().build(i(this,l),this.options)),i(this,n).addObserver(this),i(this,n).execute(t)}},l=new WeakMap,d=new WeakMap,n=new WeakMap,h=new WeakMap,g=new WeakSet,E=function(){var s;const t=((s=i(this,n))==null?void 0:s.state)??P();f(this,d,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},x=new WeakSet,M=function(t){w.batch(()=>{var s,e,o,u,a,c,C,_;if(i(this,h)&&this.hasListeners()){const b=i(this,d).variables,O=i(this,d).context;(t==null?void 0:t.type)==="success"?((e=(s=i(this,h)).onSuccess)==null||e.call(s,t.data,b,O),(u=(o=i(this,h)).onSettled)==null||u.call(o,t.data,null,b,O)):(t==null?void 0:t.type)==="error"&&((c=(a=i(this,h)).onError)==null||c.call(a,t.error,b,O),(_=(C=i(this,h)).onSettled)==null||_.call(C,void 0,t.error,b,O))}this.listeners.forEach(b=>{b(i(this,d))})})},R);function k(r,t){const s=q(t),[e]=v.useState(()=>new U(s,r));v.useEffect(()=>{e.setOptions(r)},[e,r]);const o=v.useSyncExternalStore(v.useCallback(a=>e.subscribe(w.batchCalls(a)),[e]),()=>e.getCurrentResult(),()=>e.getCurrentResult()),u=v.useCallback((a,c)=>{e.mutate(a,c).catch(D)},[e]);if(o.error&&N(e.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:u,mutateAsync:o.mutate}}function D(){}const I="_error_qdim9_1",Q="_position_qdim9_7",J="_left_qdim9_11",S={error:I,position:Q,left:J},G=({loading:r,centerText:t=!1,err:s})=>{const e=()=>{var u;const o=(u=s==null?void 0:s.response)==null?void 0:u.data;return typeof o=="object"&&o&&"errors"in o&&o.errors?m.jsx(m.Fragment,{children:Object.values(o.errors).map(a=>{if(Array.isArray(a))return m.jsx("p",{className:S.error,children:String(a[0])},String(a))})}):typeof o=="string"?m.jsx("p",{className:S.error,children:o}):m.jsx("p",{className:S.error,children:s==null?void 0:s.message})};return m.jsxs("div",{className:t?S.position:"",children:[r&&m.jsx(F,{form:!0}),s&&e()]})},H=r=>{const[t,s]=v.useState(null),e=()=>s(()=>null),{mutateAsync:o,isSuccess:u,isPending:a}=k({onError:c=>s(()=>c),mutationFn:c=>r(c)});return{postData:o,error:t,blurError:e,isPending:a,isSuccess:u}};export{G as L,k as a,H as u};
